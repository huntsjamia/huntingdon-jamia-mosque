<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-11565915265">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-11565915265');
</script>   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jamia Mosque Huntingdon</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
    <style>
        /* Donation Section Styles */
        #donation {
            padding: 40px 20px;
            background: #f4f4f9;
            text-align: center;
        }

        #donation h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        #donation p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .square-donation-box {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: #ffffff;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .square-donate-button {
            display: inline-block;
            font-size: 18px;
            line-height: 48px;
            height: 48px;
            color: #ffffff;
            min-width: 212px;
            background-color: #006aff;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1) inset;
        }

        .square-donate-button:hover {
            background-color: #0053d6;
        }

        /* Upcoming Events Image Styling */
        .event-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        /* Optional: Ensure the image fits well on smaller screens */
        @media (max-width: 768px) {
            .event-image {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Huntingdon Jamia Mosque</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#donation">Donate</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-content">
            <h2>Welcome to Jamia Mosque Huntingdon</h2>
            <p>A peaceful place of worship and community service</p>
            <a href="#contact" class="btn">Get in Touch</a>
        </div>
    </section>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Left Column -->
        <div class="content-left">
            <section id="about" class="section">
                <h2>About Us</h2>
                <p>Jamia Mosque Huntingdon has been serving the local community for over 20 years. We provide a welcoming space for Muslims to practice their faith, engage in spiritual learning and embrace the muslim community.</p>
            </section>

            <section id="services" class="section">
                <h2>Our Services</h2>
                <div class="services-grid">
                    <div class="service-item">
                        <h3>Daily Prayers</h3>
                        <p>Join us for the five daily prayers in congregation.</p>
                    </div>
                    <div class="service-item">
                        <h3>Friday Jummah</h3>
                        <p>Weekly Jummah Khutba and prayers.</p>
                    </div>
                    <div class="service-item">
                        <h3>Quran Classes</h3>
                        <p>Children education classes.</p>
                    </div>
                    <div class="service-item">
                        <h3>Mehfil Services</h3>
                        <p>Conducting community events for key Islamic dates.</p>
                    </div>
                </div>
            </section>

            <!-- Updated Events Section with Image -->
            <section id="events" class="section">
                <h2>Upcoming Events</h2>
                <p>Stay tuned for special Islamic lectures, charity events, and community gatherings.</p>
            
            </section>
        </div>

       <!-- Right Column: Prayer Times -->
<aside class="content-right">
  <div class="prayer-times">
    <h2>Prayer Times</h2>

    <!-- We'll populate this list dynamically -->
    <ul id="prayer-times-list">
      <li>Loading…</li>
    </ul>

   <p>
  <a href="prayer-timetable.html" target="_blank" rel="noopener">
    View the full prayer timetable for the month here
  </a>
</p>
  </div>
</aside>

<script>
(async () => {
  const tz = 'Europe/London';
  const now = new Date();
  const y = new Intl.DateTimeFormat('en-CA', { timeZone: tz, year: 'numeric' }).format(now);
  const m = new Intl.DateTimeFormat('en-CA', { timeZone: tz, month: '2-digit' }).format(now);
  const d = parseInt(new Intl.DateTimeFormat('en-GB', { timeZone: tz, day: '2-digit' }).format(now), 10);

  // If your Jumuah changes seasonally, update this string or make a small CSV for Fridays.
  const JUMUAH_TIME = '13:45';

  async function getMonthlyCSV(path) {
    const res = await fetch(path, { cache: 'no-store' });
    if (!res.ok) throw new Error('Missing CSV: ' + path);
    return res.text();
  }

  function parseCSV(text) {
    const lines = text.trim().split(/\r?\n/);
    const headers = lines.shift().split(',').map(h => h.trim().toLowerCase());
    return lines.map(line => {
      const vals = line.split(',').map(v => v.trim());
      return Object.fromEntries(headers.map((h, i) => [h, vals[i] ?? '']));
    });
  }

  const list = document.getElementById('prayer-times-list');

  try {
    const csv = await getMonthlyCSV(`data/${y}-${m}.csv`);
    const rows = parseCSV(csv);
    const row = rows.find(r => parseInt(r.date, 10) === d);
    if (!row) throw new Error('No row for today');

    // Build the same list you had, using Jamaat times from CSV
    const items = [
      ['Fajr', row.fajr || '—'],
      ['Dhuhr', row.zuhr || '—'],
      ['Asr', row.asr || '—'],
      ['Maghrib', row.maghrib || '—'],
      ['Isha', row.isha || '—'],
      ['Jummah', JUMUAH_TIME],
    ];

    list.innerHTML = items.map(([name, time]) => `<li>${name}: ${time}</li>`).join('')
      + `<li>Please note that the masjid is locked outside of given prayer times.</li>`;

  } catch (err) {
    list.innerHTML = `<li>Prayer times unavailable. Please try again later.</li>`;
    console.error(err);
  }
})();
</script>


                    
                </ul>
            </div>
        </aside>
    </div>


    <section id="quran-sessions" class="section" style="background-color: #f4f4f9; padding: 40px 20px; border-radius: 10px; margin-top: 30px;">
    <h2 style="font-size: 2rem; margin-bottom: 20px;">Online Quran Sessions</h2>
    <p style="font-size: 1.1rem; margin-bottom: 15px;">
        We are now offering live online Quran sessions for both children and adults. Learn to read and understand the Quran from the comfort of your home with experienced teachers.
    </p>
    <ul style="font-size: 1rem; text-align: left; max-width: 700px; margin: 0 auto 20px auto; line-height: 1.6;">
        <li>✔️ Flexible timings for all age groups</li>
  <li>✔️ One-on-one or group options</li>
        <li>✔️ Lessons via Zoom / Google Meet</li>
    </ul>
    <p style="font-size: 1rem;">If you are interested, please <a href="#contact-form">fill out the enquiry form</a> and mention <strong>"Online Quran Sessions"</strong> in your message.</p>
</section>





  
    <!-- Donation Section -->
    <section id="donation" class="section">
        <h2>Support Us</h2>
        <p>Your contributions help us continue our work and support the mosque.</p>
        <div class="square-donation-box">
            <a class="square-donate-button" target="_blank" data-url="https://square.link/u/ehByUReD?src=embd" href="https://square.link/u/ehByUReD?src=embed">Donate</a>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section contact-section">
        <h2>Contact Us</h2>
        <p>Feel free to reach out for any queries or information:</p>
        <ul class="contact-info">
            <li>Email: huntingdonjamiamosque@gmail.com</li>
            <li>Phone: 07806855737</li>
            <li>Address: 31 Coneygear Road, Huntingdon, PE291QN, UK</li>
        </ul>
    </section>

    <!-- Contact Form Section -->
    <section id="contact-form" class="section contact-section">
        <h2>Enquiries</h2>
        <p>Fill out the form below to send us a message.</p>
        <form action="https://formspree.io/f/mdknvzll" method="post">
            <label for="name">Your Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Your Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="message">Your Message:</label>
            <textarea id="message" name="message" required></textarea>

            <button type="submit">Send Message</button>
        </form>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Jamia Mosque Huntingdon. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function showCheckoutWindow(e) {
                e.preventDefault();

                const url = e.target.getAttribute('data-url');
                const title = 'Square Payment Links';

                // Calculate window size and position
                const width = window.innerWidth || document.documentElement.clientWidth || screen.width;
                const height = window.innerHeight || document.documentElement.clientHeight || screen.height;

                const w = 500;
                const h = height * 0.75;

                const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;
                const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;
                const systemZoom = width / window.screen.availWidth;
                const left = (width - w) / 2 / systemZoom + dualScreenLeft;
                const top = (height - h) / 2 / systemZoom + dualScreenTop;

                const newWindow = window.open(url, title, `scrollbars=yes, width=${w / systemZoom}, height=${h / systemZoom}, top=${top}, left=${left}`);
                if (window.focus) newWindow.focus();
            }

            // Attach event listener to the donate button
            document.querySelector('.square-donate-button').addEventListener('click', function (e) {
                showCheckoutWindow(e);
            });
        });
    </script>
</body>
</html>


